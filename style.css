/* ============================================
   DINAR COIN - Full Mobile App V3 UPDATED
   Updated with smooth scrolling, animations, and responsive design
   ============================================ */
:root {
    --bg-deep: #060f0b;
    --bg-dark: #0a1a14;
    --bg-card: #0f2a1f;
    --bg-card-border: #1a4a35;
    --green-primary: #1a5f4a;
    --green-light: #2a8f6a;
    --green-glow: #3adf8a;
    --gold-primary: #d4af37;
    --gold-light: #f0d060;
    --gold-dark: #b8960c;
    --gold-gradient: linear-gradient(135deg, #f0d060 0%, #d4af37 30%, #b8960c 60%, #d4af37 100%);
    --card-gradient: linear-gradient(145deg, #d4af37 0%, #f0d060 20%, #d4af37 40%, #b8960c 70%, #d4af37 100%);
    --text-white: #ffffff;
    --text-light: #c8d6d0;
    --text-muted: #7a9a8a;
    --red: #e74c3c;
    --radius-sm: 10px;
    --radius-md: 16px;
    --radius-lg: 24px;
    --radius-xl: 32px;
    --nav-height: 64px;
    --safe-bottom: env(safe-area-inset-bottom, 0px);
}

*, *::before, *::after { 
    margin:0; 
    padding:0; 
    box-sizing:border-box; 
}

html { 
    font-size:16px; 
    -webkit-text-size-adjust:100%; 
    scroll-behavior: smooth;
}

body { 
    font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','SF Pro Display','Helvetica Neue',Arial,sans-serif; 
    background:var(--bg-deep); 
    color:var(--text-white); 
    min-height:100vh; 
    min-height:100dvh; 
    overflow:hidden; 
    direction:rtl; 
    -webkit-font-smoothing:antialiased; 
    user-select:none; 
    -webkit-user-select:none;
    overscroll-behavior: none;
}

input,button,textarea { 
    font-family:inherit; 
    outline:none; 
    border:none; 
}

a { 
    text-decoration:none; 
    color:var(--gold-primary); 
}

.gold-text { color:var(--gold-primary) !important; }
.green-text { color:var(--green-light) !important; }
.red-text { color:var(--red) !important; }

/* Particles - Enhanced */
.particles-container { 
    position:fixed; 
    inset:0; 
    pointer-events:none; 
    z-index:0; 
    overflow:hidden; 
}

.particle { 
    position:absolute; 
    bottom:-10px; 
    background:var(--gold-primary); 
    border-radius:50%; 
    opacity:0; 
    animation:floatUp linear infinite; 
    will-change: transform, opacity;
}

@keyframes floatUp { 
    0%{transform:translateY(0) scale(0);opacity:0;} 
    10%{opacity:0.6;} 
    100%{transform:translateY(-100vh) scale(1);opacity:0;} 
}

/* App Wrapper */
.app-wrapper { 
    position:relative; 
    width:100%; 
    max-width:480px; 
    margin:0 auto; 
    min-height:100vh; 
    min-height:100dvh; 
    display:flex; 
    flex-direction:column; 
    z-index:1; 
    overflow:hidden; 
}

/* Screens */
.screen { 
    display:none; 
    flex:1; 
    flex-direction:column; 
    min-height:0; 
    opacity: 0;
    animation: fadeIn 0.4s ease-out forwards;
}

.screen.active-screen { 
    display:flex; 
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* ====== HOME SCREEN ====== */
#homeScreen { 
    justify-content:center; 
    align-items:center; 
    padding:20px; 
    padding-bottom:calc(var(--nav-height)+var(--safe-bottom)+20px); 
    background:radial-gradient(ellipse at center top,rgba(26,95,74,0.3) 0%,transparent 60%),
               radial-gradient(ellipse at center bottom,rgba(212,175,55,0.08) 0%,transparent 50%),
               var(--bg-deep); 
    position:relative; 
    overflow:hidden; 
}

#homeScreen::before { 
    content:''; 
    position:absolute; 
    top:-50%; 
    left:-50%; 
    width:200%; 
    height:200%; 
    background:radial-gradient(circle at 30% 20%,rgba(212,175,55,0.05) 0%,transparent 40%); 
    animation:bgShimmer 15s ease-in-out infinite alternate; 
}

@keyframes bgShimmer { 
    0%{transform:translate(0,0)} 
    100%{transform:translate(-5%,-3%)} 
}

.home-top-area { 
    position:absolute; 
    top:max(12px,env(safe-area-inset-top,12px)); 
    left:16px; 
    z-index:2; 
}

.beta-badge { 
    display:inline-block; 
    background:var(--gold-gradient); 
    color:var(--bg-deep); 
    font-size:0.6rem; 
    font-weight:800; 
    padding:3px 10px; 
    border-radius:20px; 
    letter-spacing:1.5px; 
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

.home-logo-section { 
    text-align:center; 
    margin-bottom:28px; 
    position:relative; 
    z-index:2; 
}

.logo-glow-ring { 
    width:100px; 
    height:100px; 
    margin:0 auto 10px; 
    border-radius:50%; 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    position:relative; 
}

.logo-glow-ring::before { 
    content:''; 
    position:absolute; 
    inset:-3px; 
    border-radius:50%; 
    background:conic-gradient(from 0deg,var(--gold-primary),var(--green-light),var(--gold-primary)); 
    opacity:0.3; 
    animation:spinGlow 6s linear infinite; 
}

@keyframes spinGlow { 
    to{transform:rotate(360deg)} 
}

.home-logo-img { 
    width:90px; 
    height:90px; 
    border-radius:50%; 
    object-fit:cover; 
    position:relative; 
    z-index:1; 
    filter:drop-shadow(0 0 10px rgba(212,175,55,0.3));
    animation: breathe 3s ease-in-out infinite;
}

@keyframes breathe {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.03); }
}

.home-app-name { 
    font-size:1.5rem; 
    font-weight:700; 
    letter-spacing:2px; 
    text-shadow:0 2px 10px rgba(0,0,0,0.5); 
}

.price-display-card { 
    width:100%; 
    max-width:280px; 
    margin:0 auto 28px; 
    position:relative; 
    z-index:2; 
}

.price-card-inner { 
    background:var(--card-gradient); 
    border-radius:var(--radius-lg); 
    padding:24px 20px; 
    text-align:center; 
    box-shadow:0 8px 40px rgba(212,175,55,0.25),inset 0 1px 0 rgba(255,255,255,0.3); 
    position:relative; 
    overflow:hidden;
    transition: transform 0.3s ease;
}

.price-card-inner:hover {
    transform: translateY(-2px);
}

.price-card-inner::before { 
    content:''; 
    position:absolute; 
    inset:0; 
    background:linear-gradient(135deg,rgba(255,255,255,0.2) 0%,transparent 50%,rgba(255,255,255,0.1) 100%); 
    pointer-events:none; 
}

.price-card-inner::after { 
    content:''; 
    position:absolute; 
    inset:5px; 
    border:1.5px solid rgba(255,255,255,0.2); 
    border-radius:calc(var(--radius-lg) - 3px); 
    pointer-events:none; 
}

.price-line { 
    display:flex; 
    align-items:baseline; 
    justify-content:center; 
    gap:6px; 
}

.price-amount { 
    font-size:2.8rem; 
    font-weight:800; 
    color:var(--bg-deep); 
    line-height:1; 
}

.price-unit { 
    font-size:1.2rem; 
    font-weight:700; 
    color:var(--bg-deep); 
    opacity:0.7; 
}

.price-equals { 
    font-size:1.6rem; 
    font-weight:700; 
    color:var(--bg-deep); 
    opacity:0.5; 
    margin:2px 0; 
}

.home-auth-buttons { 
    width:100%; 
    max-width:280px; 
    display:flex; 
    flex-direction:column; 
    gap:10px; 
    position:relative; 
    z-index:2; 
}

.btn-auth { 
    width:100%; 
    padding:14px; 
    border-radius:var(--radius-md); 
    font-size:1rem; 
    font-weight:700; 
    cursor:pointer; 
    transition:all 0.3s ease; 
}

.btn-signup { 
    background:var(--green-primary); 
    color:var(--text-white); 
    box-shadow:0 4px 20px rgba(26,95,74,0.4); 
}

.btn-signup:active { 
    transform:scale(0.97); 
}

.btn-login { 
    background:transparent; 
    color:var(--gold-primary); 
    border:2px solid var(--gold-primary); 
}

.btn-login:active { 
    transform:scale(0.97); 
}

.flag-decoration { 
    position:absolute; 
    bottom:calc(var(--nav-height)+var(--safe-bottom)+10px); 
    right:-20px; 
    display:flex; 
    flex-direction:column; 
    transform:rotate(-15deg) skewX(-10deg); 
    opacity:0.12; 
    width:160px; 
    z-index:1; 
}

.flag-stripe { 
    height:10px; 
    width:100%; 
}

.flag-stripe.red { background:#ce1126; }
.flag-stripe.white { background:#fff; }
.flag-stripe.black { background:#000; }

/* ====== DASHBOARD ====== */
#dashboardScreen,#newsScreen,#analyticsScreen,#profileScreen { 
    background:var(--bg-dark); 
}

.dash-header { 
    display:flex; 
    align-items:center; 
    justify-content:space-between; 
    padding:max(10px,env(safe-area-inset-top,10px)) 16px 10px; 
    background:var(--bg-dark); 
    position:sticky; 
    top:0; 
    z-index:10; 
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
}

.dash-title { 
    font-size:1.1rem; 
    font-weight:700; 
    letter-spacing:1px; 
}

.dash-header-btn { 
    width:36px; 
    height:36px; 
    border-radius:50%; 
    background:var(--bg-card); 
    border:1px solid var(--bg-card-border); 
    color:var(--text-light); 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    font-size:0.9rem; 
    cursor:pointer; 
    transition: all 0.3s ease;
}

.dash-header-btn:active { 
    transform:scale(0.92); 
}

.user-avatar-btn { 
    background:var(--green-primary); 
    color:var(--gold-primary); 
    font-weight:700; 
    font-size:0.85rem; 
    border-color:var(--gold-dark); 
}

/* FIXED: Smooth Scrolling */
.dash-scroll-content { 
    flex:1; 
    overflow-y:auto; 
    overflow-x:hidden; 
    -webkit-overflow-scrolling:touch; 
    padding:0 14px; 
    padding-bottom:calc(var(--nav-height)+var(--safe-bottom)); 
    scroll-behavior: smooth;
    overscroll-behavior: contain;
}

/* ====== CREDIT CARD WITH FLIP ====== */
.credit-card-wrapper { 
    margin:6px 0 16px; 
    perspective:1200px; 
    cursor:pointer; 
}

.card-flipper { 
    position:relative; 
    width:100%; 
    aspect-ratio:1.586; 
    max-height:220px; 
    transition:transform 0.7s cubic-bezier(0.4,0,0.2,1); 
    transform-style:preserve-3d; 
}

.card-flipper.flipped { 
    transform:rotateY(180deg); 
}

.credit-card { 
    position:absolute; 
    inset:0; 
    border-radius:var(--radius-lg); 
    padding:16px 18px; 
    display:flex; 
    flex-direction:column; 
    justify-content:space-between; 
    backface-visibility:hidden; 
    -webkit-backface-visibility:hidden; 
    overflow:hidden; 
}

.card-front { 
    background:var(--card-gradient); 
    box-shadow:0 10px 40px rgba(212,175,55,0.3); 
}

.card-front::before { 
    content:''; 
    position:absolute; 
    inset:0; 
    background:linear-gradient(135deg,rgba(255,255,255,0.25) 0%,transparent 40%,rgba(255,255,255,0.05) 60%,rgba(255,255,255,0.15) 100%); 
    pointer-events:none; 
}

.card-back { 
    background:linear-gradient(145deg,#2a2a2a 0%,#3a3a3a 30%,#2a2a2a 60%,#1a1a1a 100%); 
    transform:rotateY(180deg); 
    box-shadow:0 10px 40px rgba(0,0,0,0.5); 
}

/* Card details - shortened for brevity, keeping original styles */
.card-top-row { display:flex; justify-content:space-between; align-items:flex-start; position:relative; z-index:1; }
.card-dc-logo { display:flex; align-items:center; gap:4px; }
.dc-letter { font-size:1.6rem; font-weight:900; color:var(--bg-deep); background:rgba(0,0,0,0.15); width:32px; height:32px; display:flex; align-items:center; justify-content:center; border-radius:7px; }
.dc-sub { font-size:0.55rem; font-weight:800; color:var(--bg-deep); line-height:1.1; opacity:0.7; text-align:left; }
.card-balance-section { text-align:left; }
.card-balance-label { font-size:0.5rem; font-weight:700; color:var(--bg-deep); opacity:0.5; letter-spacing:0.5px; text-transform:uppercase; margin-bottom:1px; }
.card-balance-value { font-size:1.4rem; font-weight:900; color:var(--bg-deep); line-height:1; }
.card-number-section { margin-top:8px; direction:ltr; text-align:left; }
.card-number { font-size:0.95rem; font-weight:700; color:var(--bg-deep); letter-spacing:1px; opacity:0.85; }
.card-bottom-row { display:flex; justify-content:space-between; align-items:flex-end; position:relative; z-index:1; }
.card-name-holder { direction:rtl; text-align:right; flex:1; }
.card-label-mini { font-size:0.45rem; font-weight:700; color:var(--bg-deep); opacity:0.45; text-transform:uppercase; letter-spacing:0.5px; margin-bottom:1px; }
.card-name { font-size:0.75rem; font-weight:800; color:var(--bg-deep); opacity:0.9; max-width:140px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.card-expiry-holder { direction:ltr; text-align:left; }
.card-expiry-val { font-size:0.75rem; font-weight:800; color:var(--bg-deep); opacity:0.9; }
.card-back-label { font-size:0.45rem; font-weight:700; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.5px; margin-bottom:3px; text-align:left; }
.card-cvv-bar { background:#000; height:36px; border-radius:4px; display:flex; align-items:center; justify-content:flex-end; padding:0 10px; text-align:right; direction:ltr; }
.card-cvv-value { font-size:0.85rem; font-weight:800; color:#fff; letter-spacing:2px; }

/* Quick Actions */
.quick-actions-grid { display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin-bottom:16px; }
.quick-action-btn { background:var(--bg-card); border:1px solid var(--bg-card-border); border-radius:var(--radius-md); padding:14px 10px; text-align:center; cursor:pointer; transition:all 0.3s ease; }
.quick-action-btn:active { transform:scale(0.95); background:var(--bg-card-border); }
.qa-icon { width:32px; height:32px; border-radius:50%; margin:0 auto 5px; display:flex; align-items:center; justify-content:center; font-size:0.9rem; }
.qa-icon.buy { background:linear-gradient(135deg,var(--gold-dark),var(--gold-primary)); color:var(--bg-deep); }
.qa-icon.send { background:linear-gradient(135deg,#2980b9,#3498db); color:#fff; }
.qa-icon.receive { background:linear-gradient(135deg,var(--green-primary),var(--green-light)); color:var(--gold-primary); }
.qa-label { font-size:0.7rem; font-weight:600; color:var(--text-light); }

/* Section */
.dash-section-title { font-size:0.9rem; font-weight:700; color:var(--text-light); margin:12px 0 6px; letter-spacing:0.3px; }
.content-card { background:var(--bg-card); border:1px solid var(--bg-card-border); border-radius:var(--radius-md); padding:12px 14px; margin-bottom:10px; }

/* Transactions */
.transaction-item { display:flex; align-items:center; gap:10px; padding:10px 0; border-bottom:1px solid rgba(255,255,255,0.04); }
.transaction-item:last-child { border-bottom:none; }
.transaction-icon { width:36px; height:36px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:0.8rem; flex-shrink:0; }
.transaction-icon.positive { background:rgba(42,143,106,0.15); color:var(--green-light); }
.transaction-icon.negative { background:rgba(231,76,60,0.15); color:var(--red); }
.transaction-icon.pending { background:rgba(212,175,55,0.15); color:var(--gold-primary); }
.transaction-details { flex:1; }
.transaction-type { font-size:0.82rem; font-weight:600; color:var(--text-light); }
.transaction-date { font-size:0.68rem; color:var(--text-muted); margin-top:1px; }
.transaction-amount { font-size:0.85rem; font-weight:700; }
.transaction-amount.positive { color:var(--green-light); }
.transaction-amount.negative { color:var(--red); }
.transaction-amount.pending { color:var(--gold-primary); }
.empty-state { text-align:center; padding:30px 20px; color:var(--text-muted); }
.empty-state i { font-size:2.5rem; opacity:0.3; margin-bottom:10px; display:block; }
.empty-state p { font-size:0.82rem; }

/* Stats */
.stats-row { display:flex; gap:8px; margin-bottom:10px; }
.stat-box { flex:1; background:var(--bg-card); border:1px solid var(--bg-card-border); border-radius:var(--radius-md); padding:10px 12px; text-align:center; }
.stat-value { font-size:1.1rem; font-weight:800; color:var(--gold-primary); margin-bottom:2px; }
.stat-label { font-size:0.65rem; font-weight:600; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.5px; }

/* News */
.news-card { background:var(--bg-card); border:1px solid var(--bg-card-border); border-radius:var(--radius-md); overflow:hidden; margin-bottom:10px; cursor:pointer; transition:all 0.3s ease; }
.news-card:active { transform:scale(0.98); }
.news-img { width:100%; height:120px; object-fit:cover; background:var(--bg-card-border); }
.news-content { padding:12px 14px; }
.news-meta { display:flex; align-items:center; gap:6px; margin-bottom:5px; }
.news-cat { font-size:0.62rem; font-weight:700; color:var(--gold-primary); text-transform:uppercase; letter-spacing:0.5px; }
.news-date { font-size:0.62rem; color:var(--text-muted); }
.news-title { font-size:0.85rem; font-weight:700; color:var(--text-light); line-height:1.3; margin-bottom:4px; }
.news-summary { font-size:0.72rem; color:var(--text-muted); line-height:1.4; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden; }
.article-full-content { padding:10px 0; }
.article-full-content img { width:100%; height:200px; object-fit:cover; border-radius:var(--radius-md); margin-bottom:14px; }
.article-full-content h2 { font-size:1.1rem; font-weight:700; margin-bottom:6px; }
.article-full-content .article-meta { display:flex; gap:8px; font-size:0.68rem; color:var(--text-muted); margin-bottom:14px; }
.article-full-content .article-body { font-size:0.85rem; line-height:1.7; color:var(--text-light); white-space:pre-wrap; }

/* Analytics - ENHANCED */
.analytics-header { background:var(--bg-card); border:1px solid var(--bg-card-border); border-radius:var(--radius-lg); padding:16px; margin-bottom:12px; text-align:center; }
.analytics-title { font-size:1rem; font-weight:700; margin-bottom:10px; color:var(--gold-primary); }
.analytics-stats { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; }
.analytics-stat-box { background:rgba(0,0,0,0.2); border-radius:var(--radius-sm); padding:10px 8px; text-align:center; }
.analytics-stat-value { font-size:1.2rem; font-weight:800; color:var(--text-white); margin-bottom:2px; }
.analytics-stat-label { font-size:0.6rem; font-weight:600; color:var(--text-muted); text-transform:uppercase; letter-spacing:0.5px; }

.chart-container { background:var(--bg-card); border:1px solid var(--bg-card-border); border-radius:var(--radius-md); padding:14px; margin-bottom:10px; }
.chart-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; }
.chart-title { font-size:0.82rem; font-weight:700; color:var(--text-light); }
.timeframe-selector { display:flex; gap:4px; }
.tf-btn { padding:4px 10px; border-radius:6px; font-size:0.65rem; font-weight:600; color:var(--text-muted); background:transparent; cursor:pointer; transition:all 0.2s; }
.tf-btn.active { background:var(--green-primary); color:var(--text-white); }
.chart-canvas-wrapper { width:100%; height:160px; position:relative; }
canvas { width:100%; height:100%; }

.market-indicators { display:grid; grid-template-columns:repeat(2,1fr); gap:8px; margin-bottom:10px; }
.indicator-box { background:var(--bg-card); border:1px solid var(--bg-card-border); border-radius:var(--radius-md); padding:12px; }
.indicator-label { font-size:0.7rem; font-weight:600; color:var(--text-muted); margin-bottom:4px; }
.indicator-value { font-size:1rem; font-weight:800; }
.indicator-change { font-size:0.68rem; font-weight:600; margin-top:2px; }

/* Profile */
.profile-avatar-section { text-align:center; padding:18px 0; background:var(--bg-card); border:1px solid var(--bg-card-border); border-radius:var(--radius-lg); margin-bottom:12px; }
.profile-avatar-wrapper { width:80px; height:80px; margin:0 auto 10px; position:relative; }
.profile-avatar-circle { width:100%; height:100%; border-radius:50%; background:var(--green-primary); display:flex; align-items:center; justify-content:center; font-size:2rem; font-weight:800; color:var(--gold-primary); border:3px solid var(--gold-dark); }
.profile-avatar-img { width:100%; height:100%; border-radius:50%; object-fit:cover; }
.profile-name-text { font-size:1.1rem; font-weight:700; margin-bottom:3px; }
.profile-email-text { font-size:0.75rem; color:var(--text-muted); }
.settings-section { margin-bottom:14px; }
.settings-section-title { font-size:0.82rem; font-weight:700; color:var(--text-muted); margin-bottom:6px; text-transform:uppercase; letter-spacing:0.5px; }
.settings-card { background:var(--bg-card); border:1px solid var(--bg-card-border); border-radius:var(--radius-md); overflow:hidden; }
.settings-item { display:flex; align-items:center; gap:10px; padding:12px 14px; border-bottom:1px solid rgba(255,255,255,0.04); cursor:pointer; transition:background 0.2s; }
.settings-item:last-child { border-bottom:none; }
.settings-item:active { background:rgba(255,255,255,0.02); }
.settings-item-icon { width:32px; height:32px; border-radius:50%; background:rgba(212,175,55,0.1); color:var(--gold-primary); display:flex; align-items:center; justify-content:center; font-size:0.85rem; flex-shrink:0; }
.settings-item-content { flex:1; }
.settings-item-label { display:block; font-size:0.8rem; font-weight:600; color:var(--text-light); }
.settings-item-value { display:block; font-size:0.72rem; color:var(--text-muted); margin-top:1px; }
.settings-arrow { font-size:0.75rem; color:var(--text-muted); flex-shrink:0; }
.toggle-switch { width:40px; height:22px; border-radius:20px; background:rgba(255,255,255,0.1); position:relative; transition:background 0.3s; flex-shrink:0; }
.toggle-switch.active { background:var(--green-primary); }
.toggle-knob { width:18px; height:18px; border-radius:50%; background:#fff; position:absolute; top:2px; right:2px; transition:transform 0.3s; }
.toggle-switch.active .toggle-knob { transform:translateX(-18px); }
.btn-logout-full { width:100%; padding:13px; background:var(--red); color:var(--text-white); border-radius:var(--radius-md); font-size:0.9rem; font-weight:700; cursor:pointer; margin:14px 0; display:flex; align-items:center; justify-content:center; gap:8px; }
.btn-logout-full:active { transform:scale(0.97); }
.app-version-info { text-align:center; padding:14px; opacity:0.4; }
.version-logo { width:30px; height:30px; border-radius:50%; margin-bottom:4px; display:block; margin:0 auto 4px; }
.app-version-info span { display:block; font-size:0.65rem; }

/* ====== BOTTOM NAV ====== */
.bottom-nav { 
    position:fixed; 
    bottom:0; 
    left:50%; 
    transform:translateX(-50%); 
    width:100%; 
    max-width:480px; 
    height:calc(var(--nav-height)+var(--safe-bottom)); 
    padding-bottom:var(--safe-bottom); 
    background:rgba(10,26,20,0.96); 
    backdrop-filter:blur(20px); 
    -webkit-backdrop-filter:blur(20px); 
    border-top:1px solid rgba(255,255,255,0.06); 
    display:flex; 
    align-items:center; 
    justify-content:space-around; 
    z-index:100; 
}

.nav-tab { 
    flex:1; 
    height:100%; 
    display:flex; 
    flex-direction:column; 
    align-items:center; 
    justify-content:center; 
    background:none; 
    color:var(--text-muted); 
    font-size:1rem; 
    cursor:pointer; 
    transition:all 0.3s ease; 
    position:relative; 
    gap:2px; 
    padding:0; 
}

.nav-tab span { 
    font-size:0.55rem; 
    font-weight:600; 
}

.nav-tab.active { 
    color:var(--gold-primary); 
}

.nav-tab.active::after { 
    content:''; 
    position:absolute; 
    top:0; 
    left:50%; 
    transform:translateX(-50%); 
    width:20px; 
    height:2px; 
    background:var(--gold-primary); 
    border-radius:0 0 2px 2px; 
}

.center-tab { 
    position:relative; 
}

.center-tab-circle { 
    width:48px; 
    height:48px; 
    border-radius:50%; 
    background:var(--green-primary); 
    border:3px solid var(--gold-primary); 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    margin-top:-18px; 
    box-shadow:0 4px 20px rgba(212,175,55,0.25);
    transition: transform 0.3s ease; 
}

.center-tab:active .center-tab-circle { 
    transform:scale(0.9); 
}

.center-logo { 
    width:30px; 
    height:30px; 
    border-radius:50%; 
    object-fit:cover; 
}

.center-tab.active::after { 
    display:none; 
}

.center-tab span { 
    display:none; 
}

/* ====== MODALS ====== */
.modal-overlay { 
    position:fixed; 
    inset:0; 
    background:rgba(0,0,0,0.7); 
    backdrop-filter:blur(8px); 
    z-index:200; 
    display:flex; 
    align-items:flex-end; 
    justify-content:center; 
    opacity:0; 
    visibility:hidden; 
    transition:all 0.3s ease; 
}

.modal-overlay.active { 
    opacity:1; 
    visibility:visible; 
}

.modal-sheet { 
    width:100%; 
    max-width:480px; 
    max-height:90vh; 
    background:var(--bg-dark); 
    border-radius:var(--radius-xl) var(--radius-xl) 0 0; 
    padding:12px 22px 36px; 
    padding-bottom:calc(36px+var(--safe-bottom)); 
    overflow-y:auto; 
    transform:translateY(100%); 
    transition:transform 0.4s cubic-bezier(0.16,1,0.3,1); 
    position:relative;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
}

.modal-overlay.active .modal-sheet { 
    transform:translateY(0); 
}

.modal-small {
    max-height: 70vh;
}

.modal-handle { 
    width:36px; 
    height:4px; 
    background:rgba(255,255,255,0.15); 
    border-radius:2px; 
    margin:0 auto 14px; 
}

.modal-close-btn { 
    position:absolute; 
    top:14px; 
    left:18px; 
    width:30px; 
    height:30px; 
    border-radius:50%; 
    background:rgba(255,255,255,0.08); 
    color:var(--text-muted); 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    font-size:0.8rem; 
    cursor:pointer; 
    z-index:10;
    transition: all 0.3s ease; 
}

.modal-close-btn:active {
    transform: scale(0.9);
}

.auth-form-header { 
    text-align:center; 
    margin-bottom:20px; 
}

.auth-icon-circle { 
    width:50px; 
    height:50px; 
    border-radius:50%; 
    background:linear-gradient(135deg,var(--green-primary),var(--green-light)); 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    margin:0 auto 10px; 
    font-size:1.2rem; 
    color:var(--text-white); 
}

.auth-form-header h2 { 
    font-size:1.2rem; 
    font-weight:700; 
    margin-bottom:3px; 
}

.auth-form-header p { 
    font-size:0.8rem; 
    color:var(--text-muted); 
}

.modal-icon-header { 
    text-align:center; 
    margin-bottom:18px; 
}

.modal-icon-circle { 
    width:48px; 
    height:48px; 
    border-radius:50%; 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    margin:0 auto 8px; 
    font-size:1.1rem; 
    color:var(--text-white); 
}

.modal-icon-circle.buy { 
    background:linear-gradient(135deg,var(--gold-dark),var(--gold-primary)); 
}

.modal-icon-circle.send { 
    background:linear-gradient(135deg,#2980b9,#3498db); 
}

.modal-icon-circle.receive { 
    background:linear-gradient(135deg,var(--green-primary),var(--green-light)); 
}

.modal-icon-header h2 { 
    font-size:1.05rem; 
    font-weight:700; 
}

.form-field { 
    margin-bottom:14px; 
}

.form-field label { 
    display:block; 
    font-size:0.75rem; 
    font-weight:600; 
    color:var(--text-light); 
    margin-bottom:5px; 
}

.input-wrapper { 
    display:flex; 
    align-items:center; 
    gap:8px; 
    background:rgba(255,255,255,0.05); 
    border:1px solid rgba(255,255,255,0.08); 
    border-radius:var(--radius-sm); 
    padding:0 12px; 
    transition:all 0.2s ease; 
}

.input-wrapper:focus-within { 
    border-color:var(--gold-primary); 
    box-shadow:0 0 0 3px rgba(212,175,55,0.1); 
}

.input-wrapper i { 
    color:var(--text-muted); 
    font-size:0.85rem; 
    flex-shrink:0; 
}

.input-wrapper input { 
    flex:1; 
    padding:12px 0; 
    background:transparent; 
    color:var(--text-white); 
    font-size:0.9rem; 
    direction:ltr; 
    text-align:right; 
}

.input-wrapper input::placeholder { 
    color:var(--text-muted); 
    opacity:0.5; 
}

.input-wrapper input[type="number"],
.input-wrapper input[type="email"] { 
    direction:ltr; 
    text-align:left; 
}

.btn-submit { 
    width:100%; 
    padding:13px; 
    background:var(--green-primary); 
    color:var(--text-white); 
    border-radius:var(--radius-sm); 
    font-size:0.95rem; 
    font-weight:700; 
    cursor:pointer; 
    margin-top:6px; 
    box-shadow:0 4px 20px rgba(26,95,74,0.3); 
    transition: all 0.3s ease;
}

.btn-submit:active { 
    transform:scale(0.97); 
}

.auth-switch-text { 
    text-align:center; 
    margin-top:14px; 
    font-size:0.8rem; 
    color:var(--text-muted); 
}

.auth-switch-text a { 
    color:var(--gold-primary); 
    font-weight:600; 
}

.calc-box { 
    background:rgba(0,0,0,0.2); 
    border-radius:var(--radius-sm); 
    padding:10px 12px; 
    margin-bottom:10px; 
}

.calc-row { 
    display:flex; 
    justify-content:space-between; 
    font-size:0.8rem; 
    color:var(--text-light); 
    padding:3px 0; 
}

.total-row { 
    border-top:1px solid rgba(255,255,255,0.08); 
    margin-top:4px; 
    padding-top:6px; 
    font-weight:700; 
    color:var(--gold-primary); 
}

.info-banner { 
    display:flex; 
    align-items:center; 
    gap:6px; 
    background:rgba(212,175,55,0.08); 
    border:1px solid rgba(212,175,55,0.15); 
    border-radius:var(--radius-sm); 
    padding:8px 10px; 
    margin-bottom:10px; 
}

.info-banner i { 
    color:var(--gold-primary); 
    font-size:0.85rem; 
    flex-shrink:0; 
}

.info-banner p { 
    font-size:0.72rem; 
    color:var(--text-light); 
    line-height:1.4; 
}

/* FIXED: QR Code Display */
.qr-display { 
    text-align:center; 
    margin-bottom:14px; 
}

.qr-box { 
    display:inline-block; 
    padding:10px; 
    background:#fff; 
    border-radius:var(--radius-md); 
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.qr-box img {
    display: block;
    max-width: 100%;
    height: auto;
}

.qr-hint { 
    font-size:0.72rem; 
    color:var(--text-muted); 
    margin-top:6px; 
}

.receive-code-box { 
    text-align:center; 
}

.receive-code-box label { 
    display:block; 
    font-size:0.75rem; 
    color:var(--text-muted); 
    margin-bottom:6px; 
}

.code-copy-row { 
    display:inline-flex; 
    align-items:center; 
    gap:6px; 
    background:rgba(0,0,0,0.2); 
    padding:8px 14px; 
    border-radius:var(--radius-sm); 
    border:1px solid var(--bg-card-border); 
}

.code-copy-row span { 
    font-size:1rem; 
    font-weight:700; 
    color:var(--gold-primary); 
    letter-spacing:1px; 
    direction:ltr; 
}

.btn-copy-sm { 
    width:30px; 
    height:30px; 
    border-radius:8px; 
    background:var(--green-primary); 
    color:var(--text-white); 
    display:flex; 
    align-items:center; 
    justify-content:center; 
    cursor:pointer; 
    font-size:0.75rem;
    transition: all 0.3s ease; 
}

.btn-copy-sm:active {
    transform: scale(0.9);
}

/* Toast */
.toast-notification { 
    position:fixed; 
    top:max(14px,env(safe-area-inset-top,14px)); 
    left:50%; 
    transform:translateX(-50%) translateY(-120%); 
    width:calc(100% - 28px); 
    max-width:440px; 
    background:var(--bg-card); 
    border:1px solid var(--bg-card-border); 
    border-radius:var(--radius-md); 
    padding:12px 14px; 
    display:flex; 
    align-items:center; 
    gap:10px; 
    z-index:999; 
    box-shadow:0 8px 30px rgba(0,0,0,0.4); 
    transition:transform 0.4s cubic-bezier(0.16,1,0.3,1); 
}

.toast-notification.active { 
    transform:translateX(-50%) translateY(0); 
}

.toast-notification.success .toast-icon { 
    color:var(--green-light); 
}

.toast-notification.error .toast-icon { 
    color:var(--red); 
}

.toast-icon { 
    font-size:1.3rem; 
    flex-shrink:0; 
}

.toast-content { 
    flex:1; 
}

.toast-content h4 { 
    font-size:0.85rem; 
    font-weight:700; 
}

.toast-content p { 
    font-size:0.72rem; 
    color:var(--text-muted); 
    margin-top:1px; 
}

.toast-close { 
    background:none; 
    color:var(--text-muted); 
    font-size:0.8rem; 
    cursor:pointer; 
    padding:4px; 
    flex-shrink:0; 
}

/* Animations */
@keyframes fadeInUp { 
    from{opacity:0;transform:translateY(16px)} 
    to{opacity:1;transform:translateY(0)} 
}

#homeScreen .home-logo-section { 
    animation:fadeInUp 0.5s ease-out; 
}

#homeScreen .price-display-card { 
    animation:fadeInUp 0.5s ease-out 0.1s both; 
}

#homeScreen .home-auth-buttons { 
    animation:fadeInUp 0.5s ease-out 0.2s both; 
}

/* Smooth Scrollbars */
::-webkit-scrollbar { 
    width:3px; 
}

::-webkit-scrollbar-track { 
    background:transparent; 
}

::-webkit-scrollbar-thumb { 
    background:rgba(255,255,255,0.08); 
    border-radius:3px; 
}

::-webkit-scrollbar-thumb:hover {
    background:rgba(255,255,255,0.12); 
}

/* Remove tap highlight */
button,a { 
    -webkit-tap-highlight-color:transparent; 
}

/* Responsive Design - ENHANCED */
@media (min-width:481px) { 
    body{background:#040a07;} 
    .app-wrapper{
        border-left:1px solid rgba(255,255,255,0.04);
        border-right:1px solid rgba(255,255,255,0.04);
    } 
}

@media (min-width:768px) { 
    .app-wrapper{
        margin-top:20px;
        margin-bottom:20px;
        border-radius:40px;
        overflow:hidden;
        min-height:calc(100vh - 40px);
        border:2px solid rgba(255,255,255,0.06);
    } 
    .bottom-nav{
        border-radius:0 0 40px 40px;
    } 
}

@media (max-width: 360px) {
    .price-amount { font-size: 2.4rem; }
    .stat-value { font-size: 0.95rem; }
    .news-title { font-size: 0.8rem; }
}

@media (max-height:680px) { 
    .home-logo-section{margin-bottom:14px;} 
    .logo-glow-ring{width:76px;height:76px;} 
    .home-logo-img{width:68px;height:68px;} 
    .price-card-inner{padding:18px 16px;} 
    .price-amount{font-size:2.2rem;} 
    .price-display-card{margin-bottom:18px;} 
    .credit-card{max-height:190px;} 
}

@media (min-height: 800px) {
    .dash-scroll-content {
        padding-bottom: calc(var(--nav-height) + var(--safe-bottom) + 20px);
    }
}

/* Prevent text selection on double tap */
* {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

input, textarea {
    -webkit-user-select: text;
    -khtml-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
}
